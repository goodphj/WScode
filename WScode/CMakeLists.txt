# Generated by env_doctor.py for NXP i.MX RT700
cmake_minimum_required(VERSION 3.13)
project(lvgl_guider C CXX ASM)

set(CMAKE_EXECUTABLE_SUFFIX ".elf")
set(CMAKE_C_STANDARD 99)
set(CMAKE_CXX_STANDARD 11)

# --------------------------------------------------------------------
# Source Discovery
# --------------------------------------------------------------------
file(GLOB_RECURSE SOURCES 
    "source/*.c" "source/*.cpp" "source/*.S"
    "board/*.c" "board/*.cpp"
    "custom/*.c" "custom/*.cpp"
    "generated/*.c" "generated/*.cpp"
    "sdk/*.c" "sdk/*.cpp" "sdk/*.S"
)

# Exclude Simulator & PC Port files
list(FILTER SOURCES EXCLUDE REGEX ".*lvgl-simulator.*")
list(FILTER SOURCES EXCLUDE REGEX ".*ports/linux.*")
list(FILTER SOURCES EXCLUDE REGEX ".*ports/windows.*")

# --------------------------------------------------------------------
# Include Directories
# --------------------------------------------------------------------
# Add all subdirectories in sdk, source, board, etc.
foreach(DIR source board custom generated sdk)
    if(IS_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/${DIR})
        file(GLOB_RECURSE CHILDREN LIST_DIRECTORIES true ${CMAKE_CURRENT_SOURCE_DIR}/${DIR}/*)
        foreach(CHILD ${CHILDREN})
            if(IS_DIRECTORY ${CHILD})
                include_directories(${CHILD})
            endif()
        endforeach()
        include_directories(${CMAKE_CURRENT_SOURCE_DIR}/${DIR})
    endif()
endforeach()

# --------------------------------------------------------------------
# Target Definition
# --------------------------------------------------------------------
add_executable(${PROJECT_NAME} ${SOURCES})

# Link standard embedded libraries
target_link_libraries(${PROJECT_NAME} PRIVATE m gcc c nosys)

message(STATUS "Configured for Embedded Target (Auto-Generated)")
